<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C.R.I.S.</title>
    
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="https://unpkg.com/gridjs/dist/theme/mermaid.min.css"/>
    <link rel="stylesheet" href="style.css" />
    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Oxanium"/>
    
    
  </head>


  <body>

    <nav>
      <img
        src="https://cdn.discordapp.com/attachments/1091416272908066816/1173105667985395732/crislogo.jpg?ex=6562beca&is=655049ca&hm=44540003813efb0356fb229e3c15aed4c77d211b0c4ab3afa9cd181c6eae80d8&"
        alt="C.R.I.S."
      />
      <ul>
        <li><button class="ctrb nav-button" >CASOS</button></li>
        <li><button class="ctrb nav-button" >REGISTROS</button></li>
        <li><button class="ctrb nav-button" >ANOMALIAS</button></li>
        <li><button class="ctrb nav-button" >CONFIG</button></li>
        <li><button class="ctrb nav-button" >DADOS</button></li>
      </ul>
      <input type="text" placeholder="Pesquise..." />
    </nav>
    
    <div id="crt" class="off">
      <div class="scanline"></div>
    </div>

    <div class="grid-container">
      <div id="wrapper" style="width: 800px;" >
        AGENTES DE CAMPO
        <div id="grid" style="width: 100%;"></div>
      </div>  


      










      <div class="col-md-6" style="width: 800px;"> 
      <div class="row">
        <div class="col-md-12"> 
          <div id="regions_div" style="width: 700px; height: 500px;"></div>
        </div>
        <div class="col-md-12">
            <h4 style="color:#00689D">Escolha um estado <br><b style="color:#00689D"></b>e visualize os casos do respectivo</h3>
            <p><b style="background-color:#00689D;color:white;font-size:1.5em">Estados</b></p><br>
            <select id="seletorCombo" style="width: 50%; color: black;">
            <option>Selecione um Estado</option>
              <option value="1">Acre</option>
              <option value="2">Alagoas</option>
              <option value="3">Amapa</option>
              <option value="4">Amazonas</option>
              <option value="5">Bahia</option>
              <option value="6">Ceara</option>
              <option value="7">Distrito Federal</option>
              <option value="8">Espirito Santo</option>
              <option value="9">Goias</option>
              <option value="10">Maranhão</option>
              <option value="11">Mato Grosso</option>
              <option value="12">Mato Grosso do Sul</option>
              <option value="13">Minas Gerais</option>
              <option value="14">Para</option>
              <option value="15">Paraíba</option>
              <option value="16">Parana</option>
              <option value="17">Pernambuco</option>
              <option value="18">Piaui</option>
              <option value="19">Rio de Janeiro</option>
              <option value="20">Rio Grande do Norte</option>
              <option value="21">Rio Grande do Sul</option>
              <option value="22">Rondonia</option>
              <option value="23">Roraima</option>
              <option value="24">Santa Catarina</option>
              <option value="25">Sao Paulo</option>
              <option value="26">Sergipe</option>
              <option value="27">Tocantins</option>
            </select>
            <h4>Unidades em <span id="estado"></span>:<h4>
            <div id="dadosLojas" style="overflow-y: scroll; height:500px;"> 
  
            </div>
          </div>
        </div>  
      </div>  















      <div class="third-column">
        <div class="translator" style="width: 800px;">
          <h2>Binary Translator</h2>
          <textarea id="inputText" placeholder="Enter text"></textarea>
            <button style="color: black;" onclick="textToBinary()">Translate to Binary</button>
            <button style="color: black;" onclick="binaryToText()">Translate to Text</button>
            <div id="output"></div>
        </div>    
        <div style="width: 800px;">
          <h1>Tradutor Paranormal</h1>
          <div id="buttonsContainer"></div>
          <div id="name"></div>
        </div>
        <div class="pic-ctn" style="width: 800px;">
          <img src="https://media.discordapp.net/attachments/1130554247113613412/1130554951802818591/koopa60_gangster_fullbody_rpg_token_c5564e3a-3456-4076-a9bd-ca2f8499d6f7.png?ex=65808459&is=656e0f59&hm=628fffb8f0b508582e9eb57e6a635c2ea00f2e736004bca3aab9c9c3dc1ebab9&=&format=webp&quality=lossless&width=605&height=605" alt="" class="pic">
          <img src="https://media.discordapp.net/attachments/1130554247113613412/1130554959021215816/koopa60_gangster_fullbody_rpg_token_6f874869-1651-46d9-b108-4249d658b1b4.png?ex=6580845a&is=656e0f5a&hm=8c5e3327cfd7084fb7c1d408feab71850d394b6ca3ac81eab7297d398f34744e&=&format=webp&quality=lossless&width=605&height=605" alt="" class="pic">
          <img src="https://media.discordapp.net/attachments/1130554247113613412/1179812467451375676/image.png?ex=657b24fc&is=6568affc&hm=2ca8afd913a8b76fa2974dce27ed6b8112812882b4c6b1ab7684cd61b67119a5&=&format=webp&quality=lossless" alt="" class="pic">
          <img src="https://media.discordapp.net/attachments/1130554247113613412/1179812467451375676/image.png?ex=657b24fc&is=6568affc&hm=2ca8afd913a8b76fa2974dce27ed6b8112812882b4c6b1ab7684cd61b67119a5&=&format=webp&quality=lossless" alt="" class="pic">
          <img src="https://media.discordapp.net/attachments/1130554247113613412/1179812467451375676/image.png?ex=657b24fc&is=6568affc&hm=2ca8afd913a8b76fa2974dce27ed6b8112812882b4c6b1ab7684cd61b67119a5&=&format=webp&quality=lossless" alt="" class="pic">
        </div>
          
          
          


        
      </div>
      
      
    </div>

    <script src="https://unpkg.com/gridjs/dist/gridjs.umd.js"></script>
    <script src="file.js"></script>
    <script src="main.js"></script>
    
    
  </body>
</html>


<script type="text/javascript" src="js/loader.js"></script>
<script type="text/javascript" src="js/jsapi.js"></script>
<script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>

<script type="text/javascript">
  google.charts.load('current', {'packages':['geochart']});
  google.charts.setOnLoadCallback(drawRegionsMap);

  dicEstados = {
      '1' : 'Acre',
      '2' : 'Alagoas',
      '3' : 'Amapa',
      '4' : 'Amazonas',
      '5' : 'Bahia',
      '6' : 'Ceara',
      '7' : 'Distrito Federal',
      '8' : 'Espirito Santo',
      '9' : 'Goias',
      '10' : 'Maranhao',
      '11' : 'Mato Grosso',
      '12' : 'Mato Grosso do Sul',
      '13' : 'Minas Gerais',
      '14' : 'Para',
      '15' : 'Paraiba',
      '16' : 'Parana',
      '17' : 'Pernambuco',
      '18' : 'Piaui',
      '19' : 'Rio de Janeiro',
      '20' : 'Rio Grande do Norte',
      '21' : 'Rio Grande do Sul',
      '22' : 'Rondonia',
      '23' : 'Roraima',
      '24' : 'Santa Catarina',
      '25' : 'Sao Paulo',
      '26' : 'Sergipe',
      '27' : 'Tocantins'
    }
    //o array abaixo pode ser alimentado por uma base de dados, ou api rest. no exemplo, deixei fixo.
    unidades = {
      'Acre': 
      {
        '0' : 
        {
          'Loja' : 'IT-Milano',
          'Fone' : '',
          'Endereco' : ''
        }, '1' :
        {
          'Loja' : '*PT-Lisboa Centro',
          'Fone' : '0000-0000',
          'Endereco' : 'Praça Doutor Teixeira Aragão 4 2D'
        }
      },
      'Maranhao':
       {
        '0' : 
        {
          'Loja' : 'Sao Luis Centro',
          'Fone' : '',
          'Endereco' : ''
        }, '1' :
        {
          'Loja' : 'Renascenca',
          'Fone' : '0000-0000',
          'Endereco' : 'Renascenca 2 Rua 7'
        }, '2' :
        {
          'Loja' : 'Caolho',
          'Fone' : '0000-1234',
          'Endereco' : 'Av. Avivares 2 Rua 7'
        }
      },
      'Sao Paulo':
       {
        '0' : 
        {
          'Loja' : 'Araçatuba',
          'Fone' : '18 3117 7471',
          'Endereco' : 'Acesse o site'
        }, '1' :
        {
          'Loja' : 'Bauru',
          'Fone' : '(14) 3014-9181',
          'Endereco' : ''
        }
      },
      'Bahia':
       {
        '0' : 
        {
          'Loja' : 'Feira de Santana',
          'Fone' : '71 3488-6577',
          'Endereco' : 'Rua Senador Theotonio Vilela, 110'
        }, '1' :
        {
          'Loja' : 'Ilheus',
          'Fone' : '0000-0000',
          'Endereco' : 'Rua Duque de Caxias, 465, sala 01, 02 e 03'
        }
      }
    }

  var ultimoEstadoSelecionado = '';


  function drawRegionsMap() {

    var data = google.visualization.arrayToDataTable([
      ['Country', 'Cases'],
      ['Brazil',null],
      ['Acre',3],
      ['Alagoas',3],
      ['Amapa',4],
      ['Amazonas',6],
      ['Bahia',7],
      ['Ceara',5],
      ['Distrito Federal',9],
      ['Espirito Santo',8],
      ['Goias',6],
      ['Maranhao',5],
      ['Mato Grosso',4],
      ['Mato Grosso do Sul',4],
      ['Minas Gerais',7],
      ['Para',6],
      ['Paraiba',5],
      ['Parana',6],
      ['Pernambuco',7],
      ['Piaui',4],
      ['Rio de Janeiro',11],
      ['Rio Grande do Norte',3],
      ['Rio Grande do Sul',4],
      ['Rondonia',1],
      ['Roraima',2],
      ['Santa Catarina',7],
      ['Sao Paulo',13],
      ['Sergipe',5],
      ['Tocantins',4]
    ]);

    var options = {
       region: 'BR',
       resolution: 'provinces',
       datalessRegionColor: 'white',
       colorAxis: {colors: ['green', 'yellow', 'red', 'black']},
       backgroundColor: '#0e0e24',
       enableRegionInteractivity: true
       
    };

    var chart = new google.visualization.GeoChart(document.getElementById('regions_div'));
    
    function myClickHandler(){
      var selection = chart.getSelection();
      var message = '';
      for (var i = 0; i < selection.length; i++) {
          var item = selection[i];
          if (item.row != null && item.column != null) {
              message += '{' + item.row + ',column:' + item.column + '}';
          } else if (item.row != null) {
              message += '' + item.row + '';
          } else if (item.column != null) {
              message += '{column:' + item.column + '}';
          }
      }
      if (message == '') {
          message = ultimoEstadoSelecionado;
      }else{
          ultimoEstadoSelecionado = message;
      }
        document.getElementById("dadosLojas").innerHTML = '';
        for(var i = 0; i < Object.keys(unidades).length; i ++){ 
          document.getElementById("estado").innerHTML = dicEstados[message];
          //Ponto de melhoria, percorrer o array apenas nos itens relacionados ao estado clicado/marcado. (lazy)
          if(unidades[dicEstados[message]][i] != undefined){
            document.getElementById("dadosLojas").innerHTML += 
            '<br>Unidade: ' + 
            unidades[dicEstados[message]][i]['Loja'] + 
            '<br>Fone: ' + 
            unidades[dicEstados[message]][i]['Fone'] + 
            '<br>Endereco: ' 
            + unidades[dicEstados[message]][i]['Endereco'] + '<br>';
          }             
        }
      }

      google.visualization.events.addListener(chart, 'select', myClickHandler);

      chart.draw(data, options);

      $('#seletorCombo').change(function(){
        valEstado = $(this).val();
        arraySelection = [];
        arraySelection.push({column:null,row:Number(valEstado)});


        function myComboHandler(option){
          var selection = option;
          console.log(selection);
          var message = '';
          for (var i = 0; i < selection.length; i++) {
              var item = selection[i];
              if (item.row != null && item.column != null) {
                  message += '{' + item.row + ',column:' + item.column + '}';
              } else if (item.row != null) {
                  message += '' + item.row + '';
              } else if (item.column != null) {
                  message += '{column:' + item.column + '}';
              }
          }
          if (message == '') {
              message = 'nothing';
              return false;
          }
            document.getElementById("dadosLojas").innerHTML = '';
            for(var i = 0; i < Object.keys(unidades).length;  i ++){ 
              document.getElementById("estado").innerHTML = dicEstados[message];
              document.getElementById("dadosLojas").innerHTML += 
              '<br>Unidade: ' + 
              unidades[dicEstados[message]][i]['Loja'] + 
              '<br>Fone: ' + 
              unidades[dicEstados[message]][i]['Fone'] + 
              '<br>Endereco: ' 
              + unidades[dicEstados[message]][i]['Endereco'] + '<br>';
            }
          }
        

        google.visualization.events.addListener(chart, 'select', myComboHandler);

          chart.draw(data, options);

          myComboHandler(arraySelection);
    });
  }



</script>
